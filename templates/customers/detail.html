{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h2>Customer Profile: {{ customer[1] }}</h2>
  <table class="table">
    <tr><th>ID</th><td>{{ customer[0] }}</td></tr>
    <tr><th>Phone</th><td>{{ customer[2] }}</td></tr>
    <tr><th>Pet Name</th><td>{{ customer[3] }}</td></tr>
    <tr><th>Date Added</th><td>{{ customer[4] }}</td></tr>
    <tr><th>Total Spent</th><td>Rs {{ total_spent }}</td></tr>
  </table>

  <h4>Recent Bills</h4>
  <table class="table">
    <thead>
      <tr><th>ID</th><th>Service</th><th>Amount</th><th>Date</th></tr>
    </thead>
    <tbody>
      {% for bill in recent_bills %}
      <tr>
        <td><a href="{{ url_for('bills.bill_detail', id=bill[0]) }}">{{ bill[0] }}</a></td>
        <td>{{ bill[1] }}</td>
        <td>Rs {{ bill[2] }}</td>
        <td>{{ bill[3] }}</td>
      </tr>
      {% else %}
      <tr><td colspan="4" class="text-center">No recent bills</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <h4>Upcoming Appointments</h4>
  <table class="table">
    <thead>
      <tr><th>ID</th><th>Service</th><th>Date</th><th>Time</th></tr>
    </thead>
    <tbody>
      {% for appt in upcoming_appointments %}
      <tr>
        <td>{{ appt[0] }}</td>
        <td>{{ appt[1] }}</td>
        <td>{{ appt[2] }}</td>
        <td>{{ appt[3] }}</td>
      </tr>
      {% else %}
      <tr><td colspan="4" class="text-center">No upcoming appointments</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <a href="{{ url_for('dashboard.dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
</div>
{% endblock %}
